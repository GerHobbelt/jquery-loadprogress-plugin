(function(){$.extend({loadprogress:function(c){var c=c||{},a={imgSelector:"img",easing:"swing",duration:"1000",showText:!0};$.extend(a,c);var h=document.getElementsByTagName("body")[0];h.style.overflow="hidden";var e=$('<div id="loadprogress-overlay" />');e.css({height:$(window).height()});var c=$('<div id="loadprogress-box" />'),f=$('<div id="loadprogress-bar" />');if(a.showText){var d=$('<div id="loadprogress-text" />');d.text("0%")}var i=$(a.imgSelector),g=i.length,b=0;e.appendTo($("body")).append(c.append(f).append(d));
$(window).one("loadprogressEnd",function(){f.stop(!0,!1).animate({width:"100%"},400,"swing");a.showText&&d.text("100%");e.delay(200).fadeTo(a.duration,0,a.easing,function(){h.style.overflow="auto";$(this).remove()})}).bind("loadprogressProgress",function(c,b){f.css({width:100*(b/g)+"%"});a.showText&&d.text(Math.floor(100*(b/g))+"%")});i.each(function(){$(this).one("load",function(){b+=1;g===b?$(window).trigger("loadprogressEnd"):$(window).trigger("loadprogressProgress",b)})})}})})(jQuery);