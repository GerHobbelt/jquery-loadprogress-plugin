(function(){$.extend({loadprogress:function(d){function h(){b.css({height:$(window).height()})}function i(){f.stop(!0,!1).animate({width:"100%"},400,"swing");a.showText&&e.text("100%");b.delay(200).fadeTo(a.duration,0,a.easing,function(){a.bodyOverflowFixTo&&(j.style.overflow=a.bodyOverflowFixTo);$(this).remove();$(window).off("resize",h)})}var d=d||{},a={imgSelector:"img",easing:"swing",duration:"1000",showText:!0,manualMode:!1,manualModeStopNum:95,bodyOverflowFixTo:"auto"};$.extend(a,d);var j=document.getElementsByTagName("body")[0];
a.bodyOverflowFixTo&&(j.style.overflow="hidden");var b=$('<div id="loadprogress-overlay" />');b.css({height:$(window).height()});var d=$('<div id="loadprogress-box" />'),f=$('<div id="loadprogress-bar" />');if(a.showText){var e=$('<div id="loadprogress-text" />');e.text("0%")}$(window).resize(h).resize();var k=$(a.imgSelector),g=k.length,c=0;b.appendTo($("body")).append(d.append(f).append(e));$(window).one("loadprogressEnd",function(){a.manualMode||i()}).bind("loadprogressProgress",function(d,b){var c=
a.manualMode?100*(b/g)-(100-a.manualModeStopNum):100*(b/g);f.css({width:c+"%"});a.showText&&e.text(Math.floor(c)+"%")});if(a.manualMode)$(window).one("loadprogressManualEnd",function(){i()});k.each(function(){var a=$(this).attr("src");$("<img />").one("load",function(){c+=1;g===c?$(window).trigger("loadprogressEnd"):$(window).trigger("loadprogressProgress",c)}).attr("src",a)})}})})(jQuery);